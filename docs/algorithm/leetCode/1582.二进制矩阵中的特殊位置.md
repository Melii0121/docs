# 1582. 二进制矩阵中的特殊位置

## 题意
给你一个大小为 `rows x cols` 的矩阵 `mat`，其中 `mat[i][j]` 是 `0` 或 `1`，请返回 矩阵 `mat` 中特殊位置的数目 。

**特殊位置** 定义：如果 `mat[i][j] == 1` 并且第 `i` 行和第 `j` 列中的所有其他元素均为 `0`（行和列的下标均 从 `0` 开始 ），则位置 (i, j) 被称为特殊位置。

- 示例 1： 
    ```
    输入：mat = [[1,0,0],
               [0,0,1],
               [1,0,0]]
    输出：1 
    解释：(1,2) 是一个特殊位置，因为 mat[1][2] == 1 且所处的行和列上所有其他元素都是 0
    ```

- 示例 2：
    ```
    输入：mat = [[1,0,0],
               [0,1,0],
               [0,0,1]]
    输出：3
    解释：(0,0), (1,1) 和 (2,2) 都是特殊位置
    ```

- 示例 3：
    ```
    输入：mat = [[0,0,0,1],
               [1,0,0,0],
               [0,1,1,0],
               [0,0,0,0]]
    输出：2
    ```

- 示例 4：
    ```
    输入：mat = [[1,0,0],
               [0,1,0],
               [0,0,1]]
    输出：3
    解释：(0,0), (1,1) 和 (2,2) 都是特殊位置
    ```

提示：
```
  rows == mat.length
  cols == mat[i].length
  1 <= rows, cols <= 100
  mat[i][j] 是 0 或 1
```

## 思考

---
### 预定义

如果换一种角度进行思考，预先得到每行及每列的1的值：
- 如果当前位置上的值不为1，则此位置不是特殊位置。
- 若一行或一列中存在多个1，则此行或此列中就不存在特殊位置。


```java
class Solution {
  public int numSpecialForPredefine(int[][] mat) {
    int m = mat.length, n = mat[0].length;
    int[] rowsSum = new int[m];
    int[] colsSum = new int[n];
    for (int i = 0; i < m; i++) {
      for (int j = 0; j < n; j++) {
        rowsSum[i] += mat[i][j];
        colsSum[j] += mat[i][j];
      }
    }
    int res = 0;
    for (int i = 0; i < m; i++) {
      for (int j = 0; j < n; j++) {
        if (mat[i][j] == 1 && rowsSum[i] == 1 && colsSum[j] == 1) {
          res++;
        }
      }
    }
    return res;
  }
}
```
---
#### 列标记方法

标记每一列中所有 `1` 所在行中的 `1` 的数量之和
- 如果 `(i,j)` 为特殊位置，则说明第 `j` 列只有一个 `1`，这一个 `1` 所在的第 `i` 行也只有它这一个 `1`，那么按照标记值的定义可得，第 `j` 列的标记值为 `1`。
- 如果第 `j` 列的标记值为 `1`，那么说明该列只能有一个 `1`。反证：如果有 `x` 个 `1（x > 1）`，则第 `j` 列的标记值一定 `≥x`。既然只能有一个 `1`，
  设其在第 `i` 行，那么标记值也是第 `i` 行中的 `1` 的数量，即：第 `i` 行也有且仅有这个 `1`。所以 `(i,j)` 为特殊位置。

```java
class Solution {
  public int numSpecialForColumnsMarked(int[][] mat) {
    int m = mat.length, n = mat[0].length;
    for (int i = 0; i < m; i++) {
      int cnt1 = 0;
      for (int j = 0; j < n; j++) {
        if (mat[i][j] == 1) {
          cnt1++;
        }
      }
      if (i == 0) {
        cnt1--;
      }
      if (cnt1 > 0) {
        for (int j = 0; j < n; j++) {
          if (mat[i][j] == 1) {
            mat[0][j] += cnt1;
          }
        }
      }
    }
    int sum = 0;
    for (int num : mat[0]) {
      if (num == 1) {
        sum++;
      }
    }
    return sum;
  }
}
```